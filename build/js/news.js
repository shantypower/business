"use strict";!function(){var a="news__tab",i="news__tab--active",c="news__content--active",e=document.querySelector(".news"),s=e.querySelectorAll("."+a),l=e.querySelectorAll(".news__content"),r=0,o=e.querySelector(".news__tabs"),t=null,d=0,u=e.querySelector(".news__indicators"),n=null,_=e.querySelector(".btn--news"),f=new XMLHttpRequest,L=["Еще новости","Еще публикации"],p=["Новости","Публикации"],v=["http://localhost:3000/data/news.json","http://localhost:3000/data/publications.json"],h=function(){var e=s[r].textContent;return p.indexOf(e)},m=function(){t=l[r].querySelectorAll(".news__item"),(d=[].indexOf.call(t,l[r].querySelector(".news__item--active")))<0&&(d=0)},w=function(){n=u.querySelectorAll(".news__indicator")},g=function(){u.innerHTML="",w()},E=function(e){for(var t=null,n=0;n<e;n++)(t=document.createElement("li")).classList.add("news__indicator"),u.appendChild(t);w(),q(d)},q=function(e){t[d].classList.remove("news__item--active"),n[d].classList.remove("news__indicator--active"),t[d=e].classList.add("news__item--active"),n[d].classList.add("news__indicator--active")},y=function(){var e=v[h()];f.open("GET",e),f.send()},S=function(e){0<e.length&&0<e.length-t.length&&((e=3<e.length-t.length?e.slice(t.length,t.length+3):e.slice(t.length)).forEach(function(e){var t,n,a,i,c,s;l[r].appendChild((t=e,n=document.createElement("article"),a=document.createElement("h3"),i=document.createElement("a"),c=document.createElement("p"),s=document.createElement("span"),n.classList.add("news__item"),n.classList.add("article"),a.classList.add("article__title"),i.innerHTML=t.title,i.setAttribute("href",t.link),c.classList.add("article__desc"),c.innerHTML=t.text,s.classList.add("article__time"),s.innerHTML=t.date,n.appendChild(a),a.appendChild(i),n.appendChild(c),n.appendChild(s),n))}),m(),E(e.length))},b=function(){l[r].innerHTML="",g(),m(),_.textContent=L[h()],y()},C=function(){console.log("не удалось загрузить данные")};m(),E(t.length),u.addEventListener("click",function(e){for(var t=e.target;t!==u;){if(t.classList.contains("news__indicator")){q([].indexOf.call(n,t));break}t=t.parentNode}}),_.addEventListener("click",function(e){e.preventDefault(),y()}),f.addEventListener("error",C),f.addEventListener("timeout",C),f.addEventListener("load",function(e){400<=e.target.status?C():200<=e.target.status&&S(JSON.parse(e.target.response))}),o.addEventListener("click",function(e){e.preventDefault();for(var t,n=e.target;n!==o;){if(n.classList.contains(a)){[].forEach.call(s,function(e){e.classList.remove(i)}),[].forEach.call(l,function(e){e.classList.remove(c)}),r=[].indexOf.call(s,n),t=b,s[r].classList.add(i),l[r].classList.add(c),"function"==typeof t&&t();break}n=n.parentNode}})}();