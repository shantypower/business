"use strict";!function(){var c="news__tab",i="news__tab--active",a="news__content--active",e=document.querySelector(".news"),l=e.querySelectorAll("."+c),r=e.querySelectorAll(".news__content"),s=0,o=e.querySelector(".news__tabs"),t=null,d=0,u=e.querySelector(".news__indicators"),n=null,_=e.querySelector(".btn--news"),f=document.querySelector(".modal--error"),w=f.querySelector(".modal__error"),m=["Еще новости","Еще публикации"],L=["Новости","Публикации"],h=function(){var e=l[s].textContent;return L.indexOf(e)},v=function(){t=r[s].querySelectorAll(".news__item"),(d=[].indexOf.call(t,r[s].querySelector(".news__item--active")))<0&&(d=0)},p=function(){r[s].innerHTML="",y(),v()},g=function(){n=u.querySelectorAll(".news__indicator")},y=function(){u.innerHTML="",g()},E=function(e){for(var t=null,n=0;n<e;n++)(t=document.createElement("li")).classList.add("news__indicator"),u.appendChild(t);g(),q(d)},q=function(e){t[d].classList.remove("news__item--active"),n[d].classList.remove("news__indicator--active"),t[d=e].classList.add("news__item--active"),n[d].classList.add("news__indicator--active")},S=function(e){0<e.length&&0<e.length-t.length&&((e=3<e.length-t.length?e.slice(t.length,t.length+3):e.slice(t.length)).forEach(function(e){var t,n,c,i,a,l;r[s].appendChild((t=e,n=document.createElement("article"),c=document.createElement("h3"),i=document.createElement("a"),a=document.createElement("p"),l=document.createElement("span"),n.classList.add("news__item"),n.classList.add("article"),c.classList.add("article__title"),i.innerHTML=t.title,i.setAttribute("href",t.link),a.classList.add("article__description"),a.innerHTML=t.text,l.classList.add("article__date"),l.innerHTML=t.date,n.appendChild(c),c.appendChild(i),n.appendChild(a),n.appendChild(l),n))}),v(),E(e.length))},b=function(){p(),_.textContent=m[h()],window.backend.load(x,C)},x=function(e){S(e)},C=function(e){window.modals.showModal(f),w.textContent=e};v(),E(t.length),u.addEventListener("click",function(e){for(var t=e.target;t!==u;){if(t.classList.contains("news__indicator")){q([].indexOf.call(n,t));break}t=t.parentNode}}),_.addEventListener("click",function(e){e.preventDefault(),window.backend.load(x,C)}),o.addEventListener("click",function(e){e.preventDefault(),p();for(var t,n=e.target;n!==o;){if(n.classList.contains(c)){[].forEach.call(l,function(e){e.classList.remove(i)}),[].forEach.call(r,function(e){e.classList.remove(a)}),s=[].indexOf.call(l,n),t=b,l[s].classList.add(i),r[s].classList.add(a),"function"==typeof t&&t();break}n=n.parentNode}}),window.news={errorHandler:C,successHandler:x,getReferenceIndex:h}}();